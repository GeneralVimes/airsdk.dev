"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[6085],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||o;return n?a.createElement(h,r(r({ref:t},s),{},{components:n})):a.createElement(h,r({ref:t},s))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=u;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d.mdxType="string"==typeof e?e:i,r[1]=d;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2344:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return d},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return s},default:function(){return u}});var a=n(7462),i=n(3366),o=(n(7294),n(3905)),r=["components"],d={title:"Packaging Android App Bundles"},l=void 0,p={unversionedId:"tutorials/platform/android/packaging-android-app-bundles",id:"tutorials/platform/android/packaging-android-app-bundles",isDocsHomePage:!1,title:"Packaging Android App Bundles",description:"This is specific for Google Play Publishing",source:"@site/docs/tutorials/platform/android/packaging-android-app-bundles.md",sourceDirName:"tutorials/platform/android",slug:"/tutorials/platform/android/packaging-android-app-bundles",permalink:"/docs/tutorials/platform/android/packaging-android-app-bundles",editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/tutorials/platform/android/packaging-android-app-bundles.md",version:"current",frontMatter:{title:"Packaging Android App Bundles"},sidebar:"mainSidebar",previous:{title:"Overview",permalink:"/docs/tutorials/platform/android/index"},next:{title:"Packaging an IPA",permalink:"/docs/tutorials/platform/ios/packaging-ipa"}},s=[{value:"Packaging",id:"packaging",children:[{value:"Setting the Android SDK",id:"setting-the-android-sdk",children:[]},{value:"Creating the AAB",id:"creating-the-aab",children:[]},{value:"Specifying Certificates",id:"specifying-certificates",children:[]}]},{value:"Creating Certificates",id:"creating-certificates",children:[]},{value:"Testing",id:"testing",children:[]}],c={toc:s};function u(e){var t=e.components,n=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This is specific for Google Play Publishing"))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Important: From August 2021, new apps are required to publish with the Android App Bundle on Google Play. New apps larger than 150 MB are now supported by either Play Feature Delivery or Play Asset Delivery."))),(0,o.kt)("p",null,"An Android App Bundle is a publishing format that includes all your app\u2019s compiled code and resources, and defers APK generation and signing to Google Play."),(0,o.kt)("p",null,"Google Play uses your app bundle to generate and serve optimized APKs for each device configuration, so only the code and resources that are needed for a specific device are downloaded to run your app. You no longer have to build, sign, and manage multiple APKs to optimize support for different devices, and users get smaller, more-optimized downloads."),(0,o.kt)("h2",{id:"packaging"},"Packaging"),(0,o.kt)("p",null,"AIR supports creation of an App Bundle by creating an Android Studio project and using Gradle to build this. ",(0,o.kt)("strong",{parentName:"p"},"It requires an Android SDK to be installed.")," It also needs to have a JDK present and available via the ",(0,o.kt)("inlineCode",{parentName:"p"},"JAVA_HOME")," environment variable."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The creation of an Android App Bundle involves a few steps and can take significantly longer than creating an APK file. We recommend that APK generation is still used during development and testing, and the AAB output can be used when packaging up an application for upload to the Play Store."))),(0,o.kt)("h3",{id:"setting-the-android-sdk"},"Setting the Android SDK"),(0,o.kt)("p",null,"You must download and install the Android SDK to your development machine. The easiest way to do this is to install Android Studio. ",(0,o.kt)("a",{parentName:"p",href:"https://developer.android.com/studio"},"Download"),"."),(0,o.kt)("h4",{id:"using-platformsdk"},"Using ",(0,o.kt)("inlineCode",{parentName:"h4"},"platformsdk")),(0,o.kt)("p",null,"If you use ",(0,o.kt)("inlineCode",{parentName:"p"},"adt")," to package your application you can supply the path to the Android SDK via the ",(0,o.kt)("inlineCode",{parentName:"p"},"-platformsdk")," option:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"adt ... -platformsdk /path/to/android/sdk\n")),(0,o.kt)("h4",{id:"using-an-environment-variable"},"Using an environment variable"),(0,o.kt)("p",null,"You can set the path to the Android SDK by setting an environment variable named ",(0,o.kt)("inlineCode",{parentName:"p"},"AIR_ANDROID_SDK_HOME")," that points to the Android SDK location."),(0,o.kt)("p",null,"This has the advantage of applying the setting to all installs of the AIR SDK."),(0,o.kt)("h4",{id:"using-adtcfg"},"Using ",(0,o.kt)("inlineCode",{parentName:"h4"},"adt.cfg")),(0,o.kt)("p",null,"You can specify the Android SDK in the ",(0,o.kt)("inlineCode",{parentName:"p"},"adt.cfg")," file located at ",(0,o.kt)("inlineCode",{parentName:"p"},"[AIRSDK]/lib/adt.cfg")," and adding the following line:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"AndroidPlatformSDK=/path/to/android/sdk\n")),(0,o.kt)("p",null,"This will need to be updated in every AIR SDK you use."),(0,o.kt)("h3",{id:"creating-the-aab"},"Creating the AAB"),(0,o.kt)("h4",{id:"using-adt"},"Using ",(0,o.kt)("inlineCode",{parentName:"h4"},"adt")),(0,o.kt)("p",null,"To package an AAB using ",(0,o.kt)("inlineCode",{parentName:"p"},"adt")," simply change the target from ",(0,o.kt)("inlineCode",{parentName:"p"},"apk")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"aab")," and ensure you provide the ",(0,o.kt)("inlineCode",{parentName:"p"},"platformsdk")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"adt -package -target aab <signing options> output.aab <app descriptor and files> [-extdir <folder>] -platformsdk <path_to_android_sdk>\n")),(0,o.kt)("h4",{id:"ides-without-direct-options"},"IDE's without direct options"),(0,o.kt)("p",null,"If you are using an IDE that currently cannot change the output target to ",(0,o.kt)("inlineCode",{parentName:"p"},"aab")," you can force AIR to output an ",(0,o.kt)("inlineCode",{parentName:"p"},"aab")," from the normal ",(0,o.kt)("inlineCode",{parentName:"p"},"apk")," packaging process. This is done by setting a configuration option in ",(0,o.kt)("inlineCode",{parentName:"p"},"adt.cfg")," (located at ",(0,o.kt)("inlineCode",{parentName:"p"},"[AIRSDK]/lib/adt.cfg"),"):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"CreateAndroidAppBundle=true\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This will force the output to be in the AAB format, however your IDE may still output a file with the extension of ",(0,o.kt)("inlineCode",{parentName:"p"},"apk"),". If this is the case you will need to rename the output from ",(0,o.kt)("inlineCode",{parentName:"p"},"application.apk")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"application.aab"),"."))),(0,o.kt)("h3",{id:"specifying-certificates"},"Specifying Certificates"),(0,o.kt)("p",null,"TODO"),(0,o.kt)("p",null,"Note that the APK generation here will use a default/debug keystore; additional command-line parameters\ncan be used if the output APK needs to be signed with a particular certificate."),(0,o.kt)("h2",{id:"creating-certificates"},"Creating Certificates"),(0,o.kt)("p",null,"TODO:: Provide information on the certificates required (Play App Signing etc)"),(0,o.kt)("h2",{id:"testing"},"Testing"),(0,o.kt)("p",null,"ADT allows an AAB file to be installed onto a handset using the ",(0,o.kt)("inlineCode",{parentName:"p"},"-installApp")," command, which wraps up the necessary bundletool commands that generate an APKS file (that contains a set of APK files suitable for a particular device) and then installs it."),(0,o.kt)("p",null,"If developers want to do this manually, instructions for this are available at ",(0,o.kt)("a",{parentName:"p",href:"https://developer.android.com/studio/command-line/bundletool#deploy_with_bundletool"},"https://developer.android.com/studio/command-line/bundletool#deploy_with_bundletool"),", essentially the below lines can be used:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"java -jar bundletool.jar build-apks --bundle output.aab --output output.apks --connected-device\njava -jar bundletool.jar install-apks --apks=output.apks\n")),(0,o.kt)("p",null,"TODO:: More information required here about signing, as this process needs to supply a certificate to sign the apk"))}u.isMDXComponent=!0}}]);